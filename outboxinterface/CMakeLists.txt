#include_directories (${CMAKE_SOURCE_DIR} ${CMAKE_BINARY_DIR} ${KDE4_INCLUDES} ${KDEPIMLIBS_INCLUDE_DIRS})

# TODO: 5324 is mailtransport. we need one of our own!
add_definitions( -DKDE_DEFAULT_DEBUG_AREA=5324 )

set( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${KDE4_ENABLE_EXCEPTIONS}" )

add_subdirectory( tests )

set(outboxinterface_lib_srcs
  dispatcherinterface.cpp
  outboxactions.cpp
  messagequeuejob.cpp

  addressattribute.cpp
  dispatchmodeattribute.cpp
  errorattribute.cpp
  sentbehaviourattribute.cpp
  transportattribute.cpp
)

# qt4_add_dbus_interface( outboxinterface_lib_srcs interfaces/org.kde.Akonadi.MailDispatcher.xml mdainterface )
# install( FILES interfaces/org.kde.Akonadi.MailDispatcher.xml DESTINATION ${DBUS_INTERFACES_INSTALL_DIR} )

kde4_add_library(outboxinterface SHARED ${outboxinterface_lib_srcs})
target_link_libraries( outboxinterface ${KDE4_KIO_LIBS} akonadi-kde akonadi-kmime kmime mailtransport )
set_target_properties(outboxinterface PROPERTIES VERSION ${GENERIC_LIB_VERSION} SOVERSION ${GENERIC_LIB_SOVERSION} )


install(TARGETS outboxinterface ${INSTALL_TARGETS_DEFAULT_ARGS})

install( FILES 
        outboxinterface_export.h
        dispatcherinterface.h
        messagequeuejob.h

        addressattribute.h
        dispatchmodeattribute.h
        errorattribute.h
        sentbehaviourattribute.h
        transportattribute.h

        DESTINATION ${INCLUDE_INSTALL_DIR}/outboxinterface COMPONENT Devel)

